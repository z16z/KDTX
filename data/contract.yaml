# 1.上传合同
- name: upload_contract
  request:
    method: POST
    url: http://kdtx-test.itheima.net/api/common/upload
    headers:
      Authorization: "Bearer {{token}}"
    files:
      file: './data/test_contract.pdf'
  response:
    status_code: 200
    json:
      msg: '操作成功'
      code: 200

# 2.新增合同
- name: add_contract
  request:
    method: POST
    url: http://kdtx-test.itheima.net/api/contract
    headers:
      Authorization: "Bearer {{token}}"
    json:
      name: 'ceshi666'
      phone: '18003041699'
      contractNo: '2003041699'
      subject: '6'
      courseId: 20
      channel: '0'
      activityID: 77
      fileName: "xxx"
  response:
    status_code: 200
    json:
      msg: '操作成功'
      code: 200

# 3.查询合同
- name: query_contract
  request:
    method: GET
    url: http://kdtx-test.itheima.net/api/contract/list
    headers:
      Authorization: "Bearer {{token}}"
    params:
      phone: '18003041699'
  response:
    status_code: 200
    json:
      total: 1
      msg: '查询成功'
      code: 200
  extract:
    contract_id: $.rows[0].id


# 4.删除合同
- name: delete_contract
  request:
    method: POST
    url: http://kdtx-test.itheima.net/api/contract/remove
    headers:
      Authorization: "Bearer {{token}}"
    data:
      id: '{{contract_id}}'
  response:
    status_code: 200
    text: 删除成功！